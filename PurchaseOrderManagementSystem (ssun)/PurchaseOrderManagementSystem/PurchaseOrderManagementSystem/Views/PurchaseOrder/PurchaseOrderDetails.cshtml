@model PurchaseOrderManagementSystemClassLibrary.Models.PurchaseOrderDetailModel
@{
    Layout = "~/Views/Shared/_Layout.cshtml"; 
}
<div class="container">
    <br />
    <h3 class="text-primary"><strong>Purchase Order Details</strong></h3>
    <!-- Purchase Order Summary -->
    <h4 class="text-muted">Purchase Order Summary</h4>
    <div class="table-responsive">
        <table class="table table-bordered table-striped">
            <tr>
                <th>PO Number</th>
                <td>@Model.PurchaseOrder.PurchaseOrderSerialNumber</td>
                <th>PO Date</th>
                <td>@Model.PurchaseOrder.PurchaseOrderDate.ToShortDateString()</td>
            </tr>
            <tr>
                <th>Expected Delivery</th>
                <td>@Model.PurchaseOrder.ExpectedDeliveryDate.ToShortDateString()</td>
                <th>Status</th>
                <td>@Model.PurchaseOrder.PurchaseOrderStatus</td>
            </tr>
            <tr>
                <th>Vendor</th>
                <td>@Model.PurchaseOrder.VendorName</td>
                <th>Contact</th>
                <td>@Model.PurchaseOrder.VendorContactName</td>
            </tr>
            <tr>
                <th>Total Price</th>
                <td colspan="3">@Model.PurchaseOrder.TotalOrderPrice</td>
            </tr>
        </table>
    </div>

    <hr />

    <!-- Products Table -->
            <h4 class="text-muted">Product Info</h4>
        @if (Model.Products != null && Model.Products.Any())
            {
            <div style="max-height: 300px; overflow-y: auto;">
                <div class="table-responsive">
                    <table class="table table-bordered table-hover table-striped">
                        <thead>
                            <tr>
                                <th>Product</th>
                                <th>Quantity</th>
                                <th>Price</th>
                                <th>Total</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var p in Model.Products)
                {
                                <tr>
                                    <td>@p.ProductName</td>
                                    <td>@p.Quantity</td>
                                    <td>@p.Price</td>
                                    <td>@(p.Quantity * p.Price)</td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
                </div>
                }
                else
                {
                <div class="text-muted text-center">No Products Available.</div>
                }
                <hr />
                <!-- Documents Table -->
                <h4 class="text-muted">Document Info</h4>
                @if (Model.Documents != null && Model.Documents.Any())
                {
                    <div style="max-height: 300px; overflow-y: auto;">
                        <div class="table-responsive">
                            <table class="table table-bordered table-hover table-striped">
                                <thead>
                                    <tr>
                                        <th>Document Name</th>
                                        <th>File Name</th>
                                        <th>Notes</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach (var doc in Model.Documents)
                                    {
                                        <tr>
                                            <td>@doc.DocumentName</td>
                                            <td>
                                                <a href="@Url.Content("~/Uploads/" + doc.DocumentFileName)" target="_blank">
                                                    @doc.DocumentName
                                                </a>
                                            </td>
                                            <td>@doc.Notes</td>
                                            <td>
                                                <a href="@Url.Action("DownloadFile", "PurchaseOrder", new { storedName = Path.GetFileName(doc.DocumentFileName), originalName = doc.DocumentName })"
                                                   class="btn btn-primary btn-sm">
                                                    <i class="glyphicon glyphicon-download"></i> Download
                                                </a>
                                            </td>
                                        </tr>
                                    }
                                </tbody>
                            </table>
                        </div>
                        </div>
                }
                else
                {
                        <div class="text-muted text-center">No Documents Uploaded.</div>
                        }
                <div class="text-right">
                    <a href="@Url.Action("PurchaseOrderList", "PurchaseOrder")" class="btn btn-primary btn-sm"> Back to List </a>

                </div>
                    </div>


        <style>
            h4.text-muted {
                margin-top: 30px;
                margin-bottom: 15px;
                border-bottom: 1px solid #ddd;
                padding-bottom: 5px;
            }
        </style>
